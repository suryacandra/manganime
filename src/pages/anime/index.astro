---
import Layout from "../../layouts/Layout.astro";
import { fetcher } from "../../../lib/helper";

const arr = [];
const $ = await fetcher(`${import.meta.env.URL}tag/ongoing`, (hasil: any[]) => {
  hasil.forEach((e) => arr.push(e));
});
const $$ = await fetcher(
  `${import.meta.env.URL}tag/ongoing/page/2/`,
  (hasil: any[]) => {
    hasil.forEach((e) => arr.push(e));
  }
);
const $$$ = await fetcher(
  `${import.meta.env.URL}tag/ongoing/page/3/`,
  (hasil: any[]) => {
    hasil.forEach((e) => arr.push(e));
  }
);
const $$$$ = await fetcher(
  `${import.meta.env.URL}tag/ongoing/page/4/`,
  (hasil: any[]) => {
    hasil.forEach((e) => arr.push(e));
  }
);
const $$$$$ = await fetcher(
  `${import.meta.env.URL}tag/ongoing/page/5/`,
  (hasil: any[]) => {
    hasil.forEach((e) => arr.push(e));
  }
);
---

<Layout title="Welcome to Astro.">
  <div class="grid grid-cols-3 gap-2 text-md">
    {
      arr.map((i) => (
        <a
          href={i.link}
          class="flex flex-col items-center w-full h-fit bg-slate-600 text-white text-center relative cursor-pointer group overflow-hidden"
        >
          <h1 class=" p-2 bg-black w-full flex items-center justify-center min-h-[64px] z-10">
            {i.title}
          </h1>
          <img
            src={i.image}
            alt={i.title}
            class="z-0 group-hover:scale-125 duration-1000"
          />
          <div class="bg-yellow-300 absolute top-[33%] left-0 px-2 py-1 text-black">
            {i.episode}
          </div>
        </a>
      ))
    }
  </div>
</Layout>
